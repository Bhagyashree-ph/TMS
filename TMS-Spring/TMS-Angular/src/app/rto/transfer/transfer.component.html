<div class="container">
    <h1 id="heading">Transfer Vehicle</h1>
    <div id="pageContainer">
        <br>
        <div class="searchBox">
            <form [formGroup]="transferForm">
                <label for="registrationId" style="margin-right: 30px;">Registration ID:<span
                        class="text-danger">*</span></label>
                <input type="text" id="registrationId" style="margin-right: 30px; width: 300px;"
                    formControlName="registrationId" placeholder="Enter Registration Number" required>
                <button type="submit" class="btn btn-primary" [disabled]="!transferForm.valid"
                    (click)="searchDetails(transferForm.value.registrationId)">Search</button>
                <!-- <span *ngIf="isLoading" class="loader">Loading...</span> -->
            </form>
        </div>

        <form *ngIf="ownerDetails && vehicleDetails">
            <div class="row">
                <div class=" col-6" style=" box-shadow: .5px 0 0 #000;">
                    <h2>Owner Details</h2>
                    <!-- <form [formGroup]="ownerForm"> -->
                    <div class="form-group">
                        <label for="ownerId">Owner ID:</label>
                        <input type="text" id="ownerId" name="ownerId" value="{{ownerDetails.ownerId}}" disabled />
                    </div>
                    <div class="form-group">
                        <label for="idType">ID Type:</label>
                        <input type="text" id="idType" name="idType" value="{{ownerDetails.idType}}" disabled />
                    </div>
                    <div class="form-group">
                        <label for="firstName">First Name:</label>
                        <input type="text" id="firstName" value="{{ownerDetails.firstName}}" disabled>
                    </div>
                    <div class="form-group">
                        <label for="lastName">Last Name:</label>
                        <input type="text" id="lastName" value="{{ownerDetails.lastName}}" disabled>
                    </div>
                    <div class="form-group">
                        <label for="dateOfBirth">Date of Birth:</label>
                        <input type="text" id="dateOfBirth" value="{{ownerDetails.dateOfBirth}}" disabled>
                    </div>
                    <div class="form-group">
                        <label for="gender">Gender:</label>
                        <input type="text" id="gender" value="{{ownerDetails.gender}}" disabled>
                    </div>
                    <div class="form-group">
                        <label for="phoneNumber">Phone Number:</label>
                        <input type="text" id="phoneNumber" value="{{ownerDetails.phoneNumber}}" disabled>
                    </div>
                    <div class="form-group">
                        <label for="address">Address:</label>
                        <input type="text" id="address" value="{{ownerDetails.address}}" disabled>
                    </div>
                    <div class="form-group">
                        <label for="pincode">Pincode:</label>
                        <input type="text" id="pincode" value="{{ownerDetails.pincode}}" disabled>
                    </div>
                    <div class="form-group">
                        <label for="occupation">Occupation:</label>
                        <input type="text" id="occupation" value="{{ownerDetails.occupation}}" disabled>
                    </div>
                    <!-- </form> -->
                </div>

                <div class="col-6" style="box-shadow: -.5px 0 0 #000;">
                    <h2>Vehicle Details</h2>
                    <!-- <form [formGroup]="vehicleForm"> -->
                    <div class="form-group">
                        <label for="vehicleId">Vehicle ID:</label>
                        <input type="text" id="vehicleId" value="{{vehicleDetails.vehicleID}}" disabled>
                    </div>
                    <div class="form-group">
                        <label for="engineNumber">Engine Number:</label>
                        <input type="text" id="engineNumber" value="{{vehicleDetails.engineNumber}}" disabled>
                    </div>
                    <div class="form-group">
                        <label for="chassisNumber">Chassis Number:</label>
                        <input type="text" id="chassisNumber" value="{{vehicleDetails.chassisNumber}}" disabled>
                    </div>
                    <div class="form-group">
                        <label for="vehicleType">Vehicle Type:</label>
                        <input type="text" id="vehicleType" value=" {{vehicleDetails.vehicleType}}" disabled>
                    </div>
                    <div class="form-group">
                        <label for="vehicleColor">Vehicle Color:</label>
                        <input type="text" id="vehicleColor" value="{{vehicleDetails.vehicleColor}}" disabled>
                    </div>
                    <div class="form-group">
                        <label for="fuelUsed">Fuel Used:</label>
                        <input type="text" id="fuelUsed" value="{{vehicleDetails.fuelUsed}}" disabled>
                    </div>
                    <div class="form-group">
                        <label for="manufactureDate">Manufacture Date:</label>
                        <input type="text" id="manufacturDate" value="{{vehicleDetails.manufacturDate}}" disabled>
                    </div>
                    <div class="form-group">
                        <label for="manufacturerName">Manufacturer Name:</label>
                        <input type="text" id="manufacturerName" value="{{vehicleDetails.manufacturerName}}" disabled>
                    </div>
                    <div class="form-group">
                        <label for="model">Model:</label>
                        <input type="text" id="model" value="{{vehicleDetails.model}}" disabled>
                    </div>
                    <div class="form-group">
                        <label for="variant">Variant:</label>
                        <input type="text" id="variant" value="{{vehicleDetails.variant}}" disabled>
                    </div>
                    <!-- </form> -->
                </div>
            </div>

            <!-- Pending offenses -->
            <br>
            <div class="popup">
            <h3 id="heading" style="font-size: 30px;">Pending offenses</h3>
            <div *ngIf="offenseData.length > 0" id="offense-table-container">
                <table mat-table [dataSource]="offenseData" class="mat-elevation-z1">
              
                  <!-- Offense detail id Column -->
                  <ng-container matColumnDef="offenseDetailId">
                    <th mat-header-cell *matHeaderCellDef> Offense detail id </th>
                    <td mat-cell *matCellDef="let offense"> {{ offense.offenseDetailId }} </td>
                  </ng-container>
                
                  <!-- Offense date time Column -->
                  <ng-container matColumnDef="dateTime">
                    <th mat-header-cell *matHeaderCellDef> Offense date time </th>
                    <td mat-cell *matCellDef="let offense"> {{ offense.dateTime }} </td>
                  </ng-container>
                
                  <!-- Place Column -->
                  <ng-container matColumnDef="place">
                    <th mat-header-cell *matHeaderCellDef> Place </th>
                    <td mat-cell *matCellDef="let offense"> {{ offense.place }} </td>
                  </ng-container>
                
                  <!-- Image Column -->
                  <ng-container matColumnDef="image">
                    <th mat-header-cell *matHeaderCellDef> Image </th>
                    <td mat-cell *matCellDef="let offense"> {{ offense.image }} </td>
                  </ng-container>
                
                  <!-- Registration id Column -->
                  <ng-container matColumnDef="registrationID">
                    <th mat-header-cell *matHeaderCellDef> Registration id </th>
                    <td mat-cell *matCellDef="let offense"> {{ offense.registration.registrationID }} </td>
                  </ng-container>
                
                  <!-- Offense id Column -->
                  <ng-container matColumnDef="offenseId">
                    <th mat-header-cell *matHeaderCellDef> Offense id </th>
                    <td mat-cell *matCellDef="let offense"> {{ offense.offense.offenseId }} </td>
                  </ng-container>
                
                  <!-- Recorded by Column -->
                  <ng-container matColumnDef="recordedBy">
                    <th mat-header-cell *matHeaderCellDef> Recorded by </th>
                    <td mat-cell *matCellDef="let offense"> {{ offense.user.userId }} </td>
                  </ng-container>
                
                  <!-- Penalty status Column -->
                  <ng-container matColumnDef="penaltyStatus">
                    <th mat-header-cell *matHeaderCellDef> Penalty status </th>
                    <td mat-cell *matCellDef="let offense"> {{ offense.penaltyStatus }} </td>
                  </ng-container>
                
                  <tr mat-header-row *matHeaderRowDef="['offenseDetailId', 'dateTime', 'place', 'image', 'registrationID', 'offenseId', 'recordedBy', 'penaltyStatus']"></tr>
                  <tr mat-row *matRowDef="let row; columns: ['offenseDetailId', 'dateTime', 'place', 'image', 'registrationID', 'offenseId', 'recordedBy', 'penaltyStatus'];"></tr>
                
                </table>
              </div>
                <div class="d-flex justify-content-center">
                    <button type="button" mat-raised-button color="primary" (click)="clearOffenses()"
                        *ngIf="!isOffenseCleared">Clear</button>
                    <!-- <button type="button" class="delBtn" (click)="nextPage()" style="background-color: blue;" [disabled]="!canProceed">Next</button> -->
                </div>
            </div>
            <div *ngIf="offenseData.length <= 0 && isOffenseCleared">
                <p>No Unpaid Offenses</p>
            </div>

            <!-- New owner details -->
            <div *ngIf="isOffenseCleared">
                <h3 id="heading" style="font-size: 30px;">New Owner details</h3>
                <div class="searchBox">
                    <form id="search-form" [formGroup]="searchOwner">
                        <label for="ownerId" style="margin-right: 30px;">Owner ID:<span
                                class="text-danger">*</span></label>
                        <input type="text" style="margin-right: 30px; width: 300px;" name="ownerId"
                            formControlName="ownerId" id="ownerId" required placeholder="Enter Owner IDr">
                        <button type="submit" class="btn btn-primary" [disabled]="!searchOwner.valid"
                            (click)="findOwner(searchOwner.value.ownerId)">Search Details</button>
                    </form>
                </div>
            <div class="row">
                <div class="col-6">
                <div class="form-group">
                    <label for="ownerId">Owner ID:</label>
                    <input type="text" id="ownerId" name="ownerId" value="{{newOwner.ownerId}}" disabled />
                </div>
                <div class="form-group">
                    <label for="idType">ID Type:</label>
                    <input type="text" id="idType" name="idType" value="{{newOwner.idType}}" disabled />
                </div>
                <div class="form-group">
                    <label for="firstName">First Name:</label>
                    <input type="text" id="firstName" value="{{newOwner.firstName}}" disabled>
                </div>
                <div class="form-group">
                    <label for="lastName">Last Name:</label>
                    <input type="text" id="lastName" value="{{newOwner.lastName}}" disabled>
                </div>
                <div class="form-group">
                    <label for="dateOfBirth">Date of Birth:</label>
                    <input type="text" id="dateOfBirth" value="{{newOwner.dateOfBirth}}" disabled>
                </div>
                </div>
                <div class="col-6">
                <div class="form-group">
                    <label for="gender">Gender:</label>
                    <input type="text" id="gender" value="{{newOwner.gender}}" disabled>
                </div>
                <div class="form-group">
                    <label for="phoneNumber">Phone Number:</label>
                    <input type="text" id="phoneNumber" value="{{newOwner.phoneNumber}}" disabled>
                </div>
                <div class="form-group">
                    <label for="address">Address:</label>
                    <input type="text" id="address" value="{{newOwner.address}}" disabled>
                </div>
                <div class="form-group">
                    <label for="pincode">Pincode:</label>
                    <input type="text" id="pincode" value="{{newOwner.pincode}}" disabled>
                </div>
                <div class="form-group">
                    <label for="occupation">Occupation:</label>
                    <input type="text" id="occupation" value="{{newOwner.occupation}}" disabled>
                </div>
                <!-- </form> -->
                 </div>
                 </div>
                 <div class="d-flex justify-content-center">
                    <button type="submit" class="btn btn-success"  (click)="transferVehicle()">Transfer</button>
                </div>
            </div>
<br>
            

        </form>
    </div>
</div>